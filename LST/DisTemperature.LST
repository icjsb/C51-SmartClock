C51 COMPILER V9.00   DISTEMPERATURE                                                        01/16/2019 10:26:33 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DISTEMPERATURE
OBJECT MODULE PLACED IN DisTemperature.OBJ
COMPILER INVOKED BY: D:\MCU\KEILMDK\C51\BIN\C51.EXE DisTemperature.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*******************************************************************************
   2          
   3          * ∫Ø ˝π¶ƒ‹√˚:   Œ¬∂»œ‘ æ
   4          
   5          *******************************************************************************/
   6          
   7          #include"lcd.h"
   8          #include"temp.h"
   9          #include"lcd1602.h"
  10          uchar danwei[] = "T:";
  11          void DisDate();
  12          void LcdDisplay(int);
  13          void DisTime();
  14          void DisTemperture();
  15          void DisDate();
  16          /*******************************************************************************
  17          * ∫Ø ˝√˚         : Distemperture()
  18          * ∫Ø ˝π¶ƒ‹               : œ‘ æŒ¬∂»
  19          *******************************************************************************/
  20          
  21          void DisTemperture()
  22          {
  23   1      
  24   1      //      LcdInit();                       //≥ı ºªØLCD1602
  25   1      //      LCD1602_Initialize();
  26   1          LCD1602_PrintString(2,1,danwei);
  27   1              LcdWriteCom(0xC5);      //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  28   1              LcdWriteData('C');
  29   1      //      DisTime();                                        //œ‘ æ ±º‰
  30   1                          
  31   1      //      DisClock();                                       //œ‘ æƒ÷÷”–Ú∫≈
  32   1          
  33   1      //      DisDate();                                        //œ‘ æ»’∆⁄ 
  34   1              
  35   1      //      while(1)
  36   1      //      {
  37   1      
  38   1                      LcdDisplay(Ds18b20ReadTemp());
  39   1                      
  40   1              
  41   1      //      }
  42   1      }
  43          
  44          /*******************************************************************************
  45          * ∫Ø ˝√˚         : LcdDisplay()
  46          * ∫Ø ˝π¶ƒ‹               : LCDœ‘ æ∂¡»°µΩµƒŒ¬∂»
  47          *******************************************************************************/
  48          
  49          void LcdDisplay(int temp)        //lcdœ‘ æ
  50          {
  51   1          
  52   1              unsigned char  datas[] = {0, 0, 0, 0, 0}; //∂®“Â ˝◊È
  53   1              float tp;  
  54   1              if(temp< 0)                             //µ±Œ¬∂»÷µŒ™∏∫ ˝
  55   1              {
C51 COMPILER V9.00   DISTEMPERATURE                                                        01/16/2019 10:26:33 PAGE 2   

  56   2                      LcdWriteCom(0xC2);              //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  57   2                      SBUF='-';//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
  58   2                      while(!TI);                              //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
  59   2                      TI=0;                                            //«Â≥˝∑¢ÀÕÕÍ≥…±Í÷æŒª
  60   2                  LcdWriteData('-');                  //œ‘ æ∏∫
  61   2                      //“ÚŒ™∂¡»°µƒŒ¬∂» « µº Œ¬∂»µƒ≤π¬Î£¨À˘“‘ºı1£¨‘Ÿ»°∑¥«Û≥ˆ‘≠¬Î
  62   2                      temp=temp-1;
  63   2                      temp=~temp;
  64   2                      tp=temp;
  65   2                      temp=tp*0.0625*100+0.5; 
  66   2                      //¡Ù¡Ω∏ˆ–° ˝µ„æÕ*100£¨+0.5 «Àƒ…·ŒÂ»Î£¨“ÚŒ™C”Ô—‘∏°µ„ ˝◊™ªªŒ™’˚–Õµƒ ±∫Ú∞—–° ˝µ„
  67   2                      //∫Û√Êµƒ ˝◊‘∂Ø»•µÙ£¨≤ªπ‹ «∑Ò¥Û”⁄0.5£¨∂¯+0.5÷Æ∫Û¥Û”⁄0.5µƒæÕ «Ω¯1¡À£¨–°”⁄0.5µƒæÕ
  68   2                      //À„”…œ0.5£¨ªπ «‘⁄–° ˝µ„∫Û√Ê°£
  69   2       
  70   2              }
  71   1              else                                             //µ±Œ¬∂»÷µŒ™’˝ ˝
  72   1              {                       
  73   2                      LcdWriteCom(0xC2);              //–¥µÿ÷∑ C0±Ì æ≥ı ºµÿ÷∑
  74   2                  LcdWriteData('+');          //œ‘ æ’˝
  75   2                      SBUF='+';//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
  76   2                      while(!TI);                              //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
  77   2                      TI=0;                                            //«Â≥˝∑¢ÀÕÕÍ≥…±Í÷æŒª
  78   2                      tp=temp;//“ÚŒ™ ˝æ›¥¶¿Ì”––° ˝µ„À˘“‘Ω´Œ¬∂»∏≥∏¯“ª∏ˆ∏°µ„–Õ±‰¡ø
  79   2                      //»Áπ˚Œ¬∂» «’˝µƒƒ«√¥£¨ƒ«√¥’˝ ˝µƒ‘≠¬ÎæÕ «≤π¬ÎÀ¸±æ…Ì
  80   2                      temp=tp*0.0625*100+0.5; 
  81   2                      //¡Ù¡Ω∏ˆ–° ˝µ„æÕ*100£¨+0.5 «Àƒ…·ŒÂ»Î£¨“ÚŒ™C”Ô—‘∏°µ„ ˝◊™ªªŒ™’˚–Õµƒ ±∫Ú∞—–° ˝µ„
  82   2                      //∫Û√Êµƒ ˝◊‘∂Ø»•µÙ£¨≤ªπ‹ «∑Ò¥Û”⁄0.5£¨∂¯+0.5÷Æ∫Û¥Û”⁄0.5µƒæÕ «Ω¯1¡À£¨–°”⁄0.5µƒæÕ
  83   2                      //À„º”…œ0.5£¨ªπ «‘⁄–° ˝µ„∫Û√Ê°£
  84   2              }
  85   1      //      datas[0] = temp / 10000;
  86   1              datas[1] = temp % 10000 / 1000;
  87   1              datas[2] = temp % 1000 / 100;
  88   1      //      datas[3] = temp % 100 / 10;
  89   1      //      datas[4] = temp % 10;
  90   1      
  91   1      /*      LcdWriteCom(0xC1);                //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  92   1              LcdWriteData('0'+datas[0]); //∞ŸŒª 
  93   1              SBUF = '0'+datas[0];//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
  94   1              while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
  95   1              TI = 0; */
  96   1              
  97   1              LcdWriteCom(0xC3);               //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  98   1              LcdWriteData('0'+datas[1]); // ÆŒª
  99   1              SBUF = '0'+datas[1];//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
 100   1              while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
 101   1              TI = 0;
 102   1      
 103   1              LcdWriteCom(0xC4);              //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
 104   1              LcdWriteData('0'+datas[2]); //∏ˆŒª 
 105   1              SBUF = '0'+datas[2];//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
 106   1              while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
 107   1              TI = 0;
 108   1      
 109   1      /*      LcdWriteCom(0xC3);              //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
 110   1              LcdWriteData('.');              //œ‘ æ °Æ.°Ø
 111   1              SBUF = '.';//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
 112   1              while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
 113   1              TI = 0;  */
 114   1      
 115   1      /*      LcdWriteCom(0xC3);               //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
 116   1              LcdWriteData('0'+datas[3]); //œ‘ æ–° ˝µ„  
 117   1              SBUF = '0'+datas[3];//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
C51 COMPILER V9.00   DISTEMPERATURE                                                        01/16/2019 10:26:33 PAGE 3   

 118   1              while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
 119   1              TI = 0;
 120   1      
 121   1              LcdWriteCom(0xC4);               //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
 122   1              LcdWriteData('0'+datas[4]); //œ‘ æ–° ˝µ„ 
 123   1              SBUF = '0'+datas[4];//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
 124   1              while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
 125   1              TI = 0;*/
 126   1      /*      for(i=0; i<6; i++)
 127   1              {
 128   1                      SBUF = CNCHAR[i];//Ω´Ω” ’µΩµƒ ˝æ›∑≈»ÎµΩ∑¢ÀÕºƒ¥Ê∆˜
 129   1                      while (!TI);                             //µ»¥˝∑¢ÀÕ ˝æ›ÕÍ≥…
 130   1                      TI = 0;
 131   1              } */
 132   1      
 133   1               
 134   1      }
 135          
 136          
 137          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    264    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
